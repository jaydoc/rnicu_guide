<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RNICU Guide – Clinical Protocols</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- React + ReactDOM (UMD) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Babel for JSX in this one file (fine for prototype) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Tailwind CDN (fine for now; you can compile later for production) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Icons -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    .card-shadow {
      box-shadow: 0 10px 15px -3px rgba(15, 23, 42, 0.12),
                  0 4px 6px -4px rgba(15, 23, 42, 0.1);
    }
    .tile-hover {
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }
    .tile-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px -5px rgba(15, 23, 42, 0.25);
    }
    .sticky-header {
      position: sticky;
      top: 0;
      z-index: 30;
      backdrop-filter: blur(10px);
      background-color: rgba(248, 250, 252, 0.92);
    }
  </style>
</head>
<body class="bg-slate-50">
<div id="root"></div>

<!-- DATA: derived from WB-offline-edit.docx (you can expand this as much as you like) -->
<script type="application/json" id="whitebook-data">
{
  "quickAccess": [
    {
      "id": "quick-reference",
      "title": "Quick Reference",
      "badge": "NEW",
      "icon": "fa-bolt",
      "bg": "bg-orange-100",
      "iconBg": "bg-orange-500",
      "description": "Fast access to admission, transfer, and discharge criteria.",
      "sections": [
        "Admissions – criteria for Well-Baby Nursery vs RNICU",
        "Transfers – NBN / CCN transfer criteria",
        "Discharges – standard discharge checklist"
      ]
    },
    {
      "id": "medications",
      "title": "Medications",
      "icon": "fa-pills",
      "bg": "bg-yellow-100",
      "iconBg": "bg-yellow-500",
      "description": "Common NICU medications and dosing guides.",
      "sections": [
        "Resuscitation meds (e.g., epinephrine, saline bolus)",
        "Antibiotics for sepsis and focal infections",
        "Prostaglandins, iNO, and cardiovascular drugs"
      ]
    },
    {
      "id": "admissions",
      "title": "Admissions",
      "icon": "fa-door-open",
      "bg": "bg-sky-100",
      "iconBg": "bg-sky-500",
      "description": "Admission criteria and initial evaluation.",
      "sections": [
        "Well-Baby Nursery criteria",
        "RNICU admission indications",
        "Initial admission orders and stabilization"
      ]
    },
    {
      "id": "transfers",
      "title": "Transfers",
      "icon": "fa-right-left",
      "bg": "bg-emerald-100",
      "iconBg": "bg-emerald-500",
      "description": "NBN and CCN transfer criteria and timing.",
      "sections": [
        "Vital sign and respiratory stability requirements",
        "Oxygen weaning and monitoring time thresholds",
        "Glucose checks and hypothermia follow-up"
      ]
    },
    {
      "id": "procedures",
      "title": "Procedures",
      "icon": "fa-stethoscope",
      "bg": "bg-rose-100",
      "iconBg": "bg-rose-500",
      "description": "Umbilical lines, LP, needle thoracentesis, and more.",
      "sections": [
        "Umbilical arterial and venous lines",
        "Intubation and ventilation setup",
        "LP, SPU, needle thoracentesis, exchange transfusion"
      ]
    },
    {
      "id": "resuscitation",
      "title": "Resuscitation",
      "icon": "fa-heart-pulse",
      "bg": "bg-fuchsia-100",
      "iconBg": "bg-fuchsia-500",
      "description": "Neonatal resuscitation steps and dosing.",
      "sections": [
        "NRP sequence and ventilation checklist",
        "Epinephrine, volume expansion, and troubleshooting",
        "Post-resuscitation stabilization"
      ]
    },
    {
      "id": "learning-modules",
      "title": "Learning Modules",
      "icon": "fa-graduation-cap",
      "bg": "bg-indigo-100",
      "iconBg": "bg-indigo-500",
      "description": "Self-paced resident learning modules.",
      "link": "nicu-learning-modules.html",
      "sections": [
        "Core RNICU orientation modules",
        "Problem-based clinical modules",
        "Self-assessment and review questions"
      ]
    }
  ],
  "systems": [
    {
      "id": "general-nicu-care",
      "title": "GENERAL NICU CARE",
      "topics": [
        "Maternal Disorders Affecting Newborn",
        "Neonatal Resuscitation",
        "Gestational Age Assessment",
        "Late Preterm Infant Care",
        "Extremely Preterm Infant Care",
        "Thermoregulation"
      ]
    },
    {
      "id": "fen",
      "title": "FLUID, ELECTROLYTE & NUTRITION PROBLEMS",
      "topics": [
        "General goals of FEN management",
        "Intravenous fluids",
        "Common electrolyte disorders",
        "Caloric intake calculations",
        "Parenteral Nutrition",
        "Enteral Nutrition",
        "IUGR / SGA nutrition"
      ]
    },
    {
      "id": "respiratory",
      "title": "RESPIRATORY PROBLEMS",
      "topics": [
        "Adequacy of Ventilation",
        "Modes of Respiratory Support",
        "RDS",
        "PPHN",
        "MAS / TTN",
        "BPD and BPD-associated PHTN",
        "Apnea",
        "CDH and cystic lung lesions"
      ]
    },
    {
      "id": "infectious-disease",
      "title": "INFECTIOUS DISEASE PROBLEMS",
      "topics": [
        "Early-onset and late-onset sepsis",
        "Meningitis",
        "UTI",
        "Focal bacterial infections",
        "GBS algorithm",
        "Viral infections (e.g., CMV, HSV)",
        "Syphilis and fungal infections"
      ]
    },
    {
      "id": "cardiovascular",
      "title": "CARDIOVASCULAR PROBLEMS",
      "topics": [
        "Prenatal and Postnatal Circulation",
        "CHD patterns of presentation",
        "Prostaglandin infusion",
        "Non-cyanotic CHD",
        "Cyanotic CHD",
        "Cardiac rhythm disorders",
        "Shock and hypotension"
      ]
    },
    {
      "id": "gastrointestinal",
      "title": "GASTROINTESTINAL PROBLEMS",
      "topics": [
        "Ileus / Feeding Intolerance",
        "Necrotizing Enterocolitis",
        "Spontaneous Intestinal Perforation",
        "Conjugated Hyperbilirubinemia",
        "Omphalocele & Gastroschisis",
        "Duodenal atresia / malrotation / volvulus",
        "Hirschsprung disease"
      ]
    },
    {
      "id": "nephrology",
      "title": "NEPHROLOGY PROBLEMS",
      "topics": [
        "Common renal labs",
        "Acute Kidney Injury",
        "CAKUT",
        "Hypertension",
        "Renal Tubular Acidosis",
        "Nephrocalcinosis",
        "Hematuria"
      ]
    },
    {
      "id": "neurology",
      "title": "NEUROLOGICAL PROBLEMS",
      "topics": [
        "Intraventricular Hemorrhage",
        "Seizures",
        "Hypoxic-Ischemic Encephalopathy",
        "Retinopathy of Prematurity",
        "Birth Trauma",
        "Neural Tube Defects"
      ]
    },
    {
      "id": "hematology",
      "title": "HEMATOLOGIC PROBLEMS",
      "topics": [
        "Unconjugated Hyperbilirubinemia",
        "Anemia",
        "Polycythemia",
        "Neonatal Thrombocytopenia",
        "Vitamin K deficiency",
        "DIC and thrombosis",
        "Blood products"
      ]
    },
    {
      "id": "endocrine",
      "title": "ENDOCRINE & METABOLIC PROBLEMS",
      "topics": [
        "Hypoglycemia",
        "Hyperglycemia",
        "Osteopenia of Prematurity",
        "CAH",
        "Bilateral Cryptorchidism",
        "Disorders of Sexual Development",
        "Inborn Errors of Metabolism"
      ]
    },
    {
      "id": "genetic",
      "title": "NAS, IEM & GENETIC PROBLEMS",
      "topics": [
        "Neonatal Abstinence Syndrome",
        "CHDs in genetic syndromes",
        "Congenital renal syndromes",
        "Nonimmune hydrops"
      ]
    },
    {
      "id": "procedures-system",
      "title": "PROCEDURES",
      "topics": [
        "Umbilical Lines",
        "Intubation",
        "Suprapubic Bladder Aspiration",
        "Lumbar Puncture",
        "Needle Thoracentesis",
        "Exchange Transfusions"
      ]
    },
    {
      "id": "medications-system",
      "title": "MEDICATIONS",
      "topics": [
        "Common NICU medications",
        "Antimicrobial dosing",
        "Cardiovascular agents",
        "Sedation and analgesia",
        "Resuscitation medications"
      ]
    }
  ]
}
</script>

<!-- APP -->
<script type="text/babel">
  const { useState, useMemo } = React;

  function useWhitebookData() {
    const raw = document.getElementById("whitebook-data").textContent;
    return JSON.parse(raw);
  }

  function App() {
    const data = useWhitebookData();
    const [search, setSearch] = useState("");
    const [activeSection, setActiveSection] = useState(null);
    const [activeType, setActiveType] = useState(null); // "quick" or "system"

    const searchResults = useMemo(() => {
      const q = search.trim().toLowerCase();
      if (!q) return [];
      const results = [];

      data.quickAccess.forEach(tile => {
        const haystack = [
          tile.title,
          tile.description || "",
          ...(tile.sections || [])
        ].join(" ").toLowerCase();
        if (haystack.includes(q)) {
          results.push({
            type: "quick",
            id: tile.id,
            title: tile.title,
            parent: "Quick Access"
          });
        }
      });

      data.systems.forEach(sys => {
        const titleMatch = sys.title.toLowerCase().includes(q);
        const topicsMatch = (sys.topics || []).some(t => t.toLowerCase().includes(q));
        if (titleMatch || topicsMatch) {
          results.push({
            type: "system",
            id: sys.id,
            title: sys.title,
            parent: "System"
          });
        }
      });

      return results.slice(0, 8);
    }, [search, data]);

    const handleOpenQuick = (tile) => {
      if (tile.link) {
        // Treat Learning Modules as an external link
        window.location.href = tile.link;
        return;
      }
      setActiveType("quick");
      setActiveSection(tile);
    };

    const handleOpenSystem = (sys) => {
      setActiveType("system");
      setActiveSection(sys);
    };

    return (
      <div className="min-h-screen text-slate-900">
        {/* Top bar */}
        <header className="sticky-header border-b border-slate-200">
          <div className="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-4">
            <div className="flex items-center gap-3">
              <div className="flex h-9 w-9 items-center justify-center rounded-xl bg-indigo-600 text-white">
                <i className="fa-solid fa-baby"></i>
              </div>
              <div>
                <div className="text-sm font-semibold text-slate-900 leading-tight">
                  RNICU Guide
                </div>
                <div className="text-xs text-slate-500">
                  Clinical Protocols
                </div>
              </div>
            </div>
            <button
              className="inline-flex items-center gap-2 rounded-full bg-amber-500 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-amber-600"
              onClick={() => {
                const quickRef = data.quickAccess.find(q => q.id === "quick-reference");
                if (quickRef) {
                  setActiveType("quick");
                  setActiveSection(quickRef);
                }
              }}
            >
              <i className="fa-solid fa-bolt text-xs"></i>
              Quick Ref
            </button>
          </div>
        </header>

        <main className="mx-auto max-w-6xl px-4 pb-10 pt-6 grid gap-6 lg:grid-cols-[minmax(0,1.7fr)_minmax(0,1.1fr)]">
          {/* Left column: hero + cards */}
          <div className="space-y-6">
            {/* Welcome card + search */}
            <section className="card-shadow rounded-2xl bg-white px-5 py-4">
              <div className="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
                <div>
                  <h1 className="text-lg font-semibold text-slate-900">
                    Welcome to the RNICU Guide
                  </h1>
                  <p className="mt-1 text-sm text-slate-600 max-w-xl">
                    Your interactive clinical protocol resource. Use the search,
                    Quick Access, or system-based browsing to find what you need fast.
                  </p>
                </div>
              </div>

              {/* Search */}
              <div className="mt-4 relative">
                <div className="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                  <i className="fa-solid fa-magnifying-glass text-slate-400 text-sm"></i>
                </div>
                <input
                  type="search"
                  className="w-full rounded-xl border border-slate-200 bg-slate-50 pl-9 pr-3 py-2 text-sm focus:border-indigo-500 focus:bg-white focus:outline-none focus:ring-1 focus:ring-indigo-500"
                  placeholder="Search protocols, medications, procedures..."
                  value={search}
                  onChange={e => setSearch(e.target.value)}
                />
                {searchResults.length > 0 && (
                  <div className="absolute z-20 mt-1 w-full rounded-xl border border-slate-200 bg-white text-sm shadow-lg">
                    {searchResults.map((r) => (
                      <button
                        key={r.type + "-" + r.id}
                        className="flex w-full items-center justify-between px-3 py-2 text-left hover:bg-slate-50"
                        onClick={() => {
                          if (r.type === "quick") {
                            const tile = data.quickAccess.find(q => q.id === r.id);
                            if (tile) handleOpenQuick(tile);
                          } else {
                            const sys = data.systems.find(s => s.id === r.id);
                            if (sys) handleOpenSystem(sys);
                          }
                          setSearch("");
                        }}
                      >
                        <span>{r.title}</span>
                        <span className="text-xs text-slate-400">{r.parent}</span>
                      </button>
                    ))}
                  </div>
                )}
              </div>
            </section>

            {/* Quick Access */}
            <section className="space-y-3">
              <div className="flex items-center justify-between">
                <h2 className="text-sm font-semibold text-slate-800">
                  Quick Access
                </h2>
              </div>
              <div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">
                {data.quickAccess.map(tile => (
                  <button
                    key={tile.id}
                    onClick={() => handleOpenQuick(tile)}
                    className={`tile-hover flex items-center gap-3 rounded-2xl border border-slate-100 ${tile.bg} p-3 text-left`}
                  >
                    <div className={`flex h-9 w-9 items-center justify-center rounded-xl text-white ${tile.iconBg}`}>
                      <i className={`fa-solid ${tile.icon} text-sm`}></i>
                    </div>
                    <div className="flex-1">
                      <div className="flex items-center gap-2">
                        <p className="text-sm font-semibold text-slate-900">
                          {tile.title}
                        </p>
                        {tile.badge && (
                          <span className="rounded-full bg-amber-500 px-1.5 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-white">
                            {tile.badge}
                          </span>
                        )}
                      </div>
                      {tile.description && (
                        <p className="mt-0.5 line-clamp-2 text-xs text-slate-600">
                          {tile.description}
                        </p>
                      )}
                    </div>
                    <i className="fa-solid fa-chevron-right text-xs text-slate-400"></i>
                  </button>
                ))}
              </div>
            </section>

            {/* Browse by System */}
            <section className="space-y-3">
              <div className="flex items-center justify-between">
                <h2 className="text-sm font-semibold text-slate-800">
                  Browse by System
                </h2>
                <span className="text-xs text-indigo-600 font-medium">
                  View All →
                </span>
              </div>

              <div className="space-y-2">
                {data.systems.map(system => (
                  <button
                    key={system.id}
                    onClick={() => handleOpenSystem(system)}
                    className="tile-hover flex w-full items-center justify-between rounded-2xl border border-slate-100 bg-white px-4 py-3 text-left"
                  >
                    <div>
                      <p className="text-xs font-semibold text-slate-900">
                        {system.title}
                      </p>
                      <p className="mt-0.5 text-[11px] text-slate-500">
                        {(system.topics || []).length} topics
                      </p>
                    </div>
                    <i className="fa-solid fa-chevron-right text-xs text-slate-400"></i>
                  </button>
                ))}
              </div>
            </section>
          </div>

          {/* Right column: detail panel */}
          <aside className="space-y-3">
            <section className="card-shadow rounded-2xl bg-white px-5 py-4 h-full">
              {!activeSection && (
                <div className="flex h-full flex-col items-center justify-center text-center text-sm text-slate-500">
                  <i className="fa-regular fa-note-sticky mb-2 text-xl text-slate-300"></i>
                  <p className="font-medium text-slate-700">No section selected</p>
                  <p className="mt-1 text-xs text-slate-500">
                    Choose a tile on the left to see key topics and checklists here.
                  </p>
                </div>
              )}

              {activeSection && (
                <div className="space-y-3">
                  <div className="flex items-start justify-between gap-2">
                    <div>
                      <p className="text-xs font-semibold uppercase tracking-wide text-indigo-600">
                        {activeType === "quick" ? "Quick Access" : "System"}
                      </p>
                      <h2 className="mt-0.5 text-sm font-semibold text-slate-900">
                        {activeSection.title}
                      </h2>
                    </div>
                    <button
                      className="rounded-full border border-slate-200 bg-slate-50 px-2 py-1 text-[10px] text-slate-600 hover:bg-slate-100"
                      onClick={() => {
                        setActiveSection(null);
                        setActiveType(null);
                      }}
                    >
                      Clear
                    </button>
                  </div>

                  {activeType === "quick" && (
                    <div className="space-y-2">
                      {activeSection.description && (
                        <p className="text-xs text-slate-600">
                          {activeSection.description}
                        </p>
                      )}
                      <ul className="mt-1 space-y-1.5 text-xs text-slate-700">
                        {(activeSection.sections || []).map((item, idx) => (
                          <li key={idx} className="flex gap-2">
                            <span className="mt-0.5 h-1.5 w-1.5 rounded-full bg-indigo-500"></span>
                            <span>{item}</span>
                          </li>
                        ))}
                      </ul>
                      {activeSection.id === "learning-modules" && activeSection.link && (
                        <a
                          href={activeSection.link}
                          className="mt-3 inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-indigo-700"
                        >
                          Open Learning Modules
                          <i className="fa-solid fa-arrow-up-right-from-square text-[10px]"></i>
                        </a>
                      )}
                    </div>
                  )}

                  {activeType === "system" && (
                    <div className="space-y-2">
                      <p className="text-xs text-slate-600">
                        Topics from the RNICU whitebook section.
                      </p>
                      <ul className="mt-1 space-y-1.5 text-xs text-slate-700">
                        {(activeSection.topics || []).map((topic, idx) => (
                          <li key={idx} className="flex gap-2">
                            <span className="mt-0.5 h-1.5 w-1.5 rounded-full bg-slate-400"></span>
                            <span>{topic}</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  )}
                </div>
              )}
            </section>
          </aside>
        </main>
      </div>
    );
  }

  const root = ReactDOM.createRoot(document.getElementById("root"));
  root.render(<App />);
</script>
</body>
</html>
